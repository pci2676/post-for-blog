# Http Basic

## 계층으로 관리하는 TCP/IP

- 애플리케이션 계층
  - 유저에게 제공되는 애플리케이션에서 사용하는 통신의 움직임을 결정
  - HTTP, FTP, DNS 등도 애플리케이션의 일종이다.
- 트랜스 포트 계층
  - 두 컴퓨터 사이의 데이터 흐름(프로토콜)을 제공한다.
  - TCP, UDP이 여기에 속한다.
- 네트워크 계층
  - 네트워크상의 패킷의 이동을 다룬다.
    - 패킷 : 전송하는 데이터의 최소 단위
  - 어떤 프로토콜을 선택하여 전송할지 네트워크 계층에서 결정한다.
  - IP가 여기에 속한다.
- 데이터 링크 계층
  - 하드웨어적 측면을 담당하고 있다.
  - 네트워크 인터페이스 카드(NIC)가 여기에 속한다.

## TCP/IP 통신의 흐름

만약 어떠한 웹페이지에 요청을 한다면

1. 애플리케이션 계층에서 HTTP 리퀘스트를 전송한다. 
   - HTTP 메세지 -> TCP 세그먼트
2. 트랜스 포트 계층에서 애플리케이션 계층에서 받은 HTTP 데이터를 통신하기 쉽게 조각내어 안내 번호와 포트 번호를 붙여 네트워크 계층에 전달한다.
   - TCP 세그먼트 -> IP 데이터 그램
3. 네트워크 계층에서 수신지 MAC 주소를 추가하여 데이터 링크 계층에 전달한다.
   - IP 데이터 그램 -> 네트워크 프레임
4. 수신측은 역순으로 메세지를 분석한다.

전송측은 각 계층을 지날때 헤더에 해당 계층에 필요한 정보를 추가한다.  
수신측은 반대로 제거한다.

## IP/TCP/DNS란

### IP - 배송 담당

- 네트워크 계층에 속한다.
- 개개의 패킷을 상대방에게 전달하는 역할이다.
  - 이를 위해서 IP 주소와 MAC 주소가 중요하다.
    - IP 주소 : 각 노드에 부여된 주소. 변경이 가능하다.
    - MAC 주소 : IP주소와 결부되어있다. 변경이 불가능하다.

#### ARP를 이용하여 MAC 주소에서 통신한다.

- IP 통신은 MAC 주소에 의존하여 통신한다.
- 컴퓨터와 네트워크 기기를 중계해서 상대방에게 도착한다.
  - 중계과정중 다음 중계기까지 찾는 과정에서 MAC 주소를 이용하여 찾아간다.
    - 이때 ARP라는 프로토콜이 사용된다.
      - 수신지의 IP를 기반으로 MAC 주소를 탐색한다.
- ARP는 IP주소(네트워크 계층)를 MAC주소(데이터 링크 계층)로 대응 시킬때 사용되는 프로토콜이다.
  - 목적지 IP는 알지만 MAC 주소를 모르기 때문에 Broadcast로 모든 라우터의 모든 노드를 탐색한다.
    - 반대의 경우 RARP이다.

### TCP - 신뢰성 담당

- 트랜스포트 계층에 속한다.
- 신뢰성 있는 바이트 스트림 제공
  - TCP 세그먼트라 불리는 단위 패킷이다.
  - 전송과 전송확인 역할을 담당한다.

#### Three way handskaing

- SYN / ACK 플래그를 이용한다.

1. 송신측에서 SYN 플래그와 함께 상대방에게 패킷을 보낸다.
2. 수신측에서 SYN/ACK 플래그와 함께 수신완료를 알린다.
3. 송신측이 ACK 플래그를 보내 패킷 교환완료를 알린다.

### DNS - 이름 해결 담당

- HTTP와 같이 애플리케이션 계층에 속한다.
- 도메인 이름과 IP 주소 이름 확인을 제공한다.
- DNS는 도메인명에서 IP 주소를 조사하거나 IP주소로부터 도메인 명을 조사한다.

1. 도메인 명을 가지고 DNS에 IP주소를 요청한다.
2. DNS는 해당 IP주소를 클라이언트에게 제공한다.
3. 클라이언트는 IP주소를 이용해서 접속한다.

### 웹 요청을 했을때 순서

1. DNS를 통해 IP주소를 알아낸다. - 애플리케이션 계층
2. IP주소로 HTTP 메세지를 전송한다. - 애플리케이션 계층 -> 트랜스포트 계층
3. HTTP 메세지를 TCP 세그먼트 패킷으로 분리하여 IP그램으로 캡슐화해 전송한다. - 트랜스포트 계층 -> 네트워크 계층
4. ARP를 이용하여 IP에 해당하는 MAC주소를 찾아 전송한다. - 네트워크 계층 -> 데이터링크 계층
5. 역순 으로 조립한다.